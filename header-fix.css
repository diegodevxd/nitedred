/* Fix completo para NITEDRED - Sistema de capas */

/* Jerarquía de z-index:
   - Header: 10000
   - Modales/Dropdowns: 9000-9999  
   - Notificaciones: 8000-8999
   - Contenido principal: 1-999
*/

/* HEADER - Capa más alta */
header {
    position: relative !important;
    z-index: 10000 !important;
    background: rgba(0, 0, 0, 0.3) !important;
    backdrop-filter: blur(10px) !important;
}

header h1 {
    position: relative !important;
    z-index: 10001 !important;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5) !important;
}

header .flex.items-center {
    position: relative !important;
    z-index: 10001 !important;
}

header h1 span {
    position: relative !important;
    z-index: 10002 !important;
    display: inline-block !important;
}

/* MODALES Y DROPDOWNS */
#search-results,
.search-results-panel {
    position: fixed !important;
    z-index: 9500 !important;
    top: 80px !important;
    right: 20px !important;
    background: rgba(0, 0, 0, 0.95) !important;
    backdrop-filter: blur(20px) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 16px !important;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5) !important;
}

#mobile-search-modal {
    z-index: 9600 !important;
}

/* NOTIFICACIONES */
#notifications-dropdown {
    position: fixed !important;
    z-index: 9400 !important;
    top: 70px !important;
    right: 20px !important;
    background: rgba(0, 0, 0, 0.95) !important;
    backdrop-filter: blur(20px) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 16px !important;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5) !important;
}

/* HISTORIAS - Arreglar posición de nombres */
.story-item {
    position: relative !important;
    z-index: 100 !important;
}

.story-item .story-username {
    position: absolute !important;
    bottom: 8px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    z-index: 101 !important;
    background: rgba(0, 0, 0, 0.7) !important;
    color: white !important;
    padding: 2px 8px !important;
    border-radius: 12px !important;
    font-size: 12px !important;
    text-align: center !important;
    white-space: nowrap !important;
    max-width: 80px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

/* CONTENIDO PRINCIPAL */
main {
    position: relative !important;
    z-index: 1 !important;
}

.glass-effect {
    position: relative !important;
    z-index: 10 !important;
}

/* POST CONTENT */
.post-content,
.feed-container {
    position: relative !important;
    z-index: 50 !important;
}

/* BOTONES DE ACCIÓN */
button, .btn {
    position: relative !important;
    z-index: 100 !important;
}

/* LIMPIAR Z-INDEXES PROBLEMÁTICOS */
* {
    position: relative;
}

*:not(header):not(header *):not(#search-results):not(#notifications-dropdown):not(.modal) {
    z-index: auto !important;
}

/* Específico para elementos que NO deben tener z-index alto */
.story-item:not(.story-username),
.post-item,
.user-item {
    z-index: 10 !important;
}

/* OVERLAYS Y BACKDROPS */
.modal-backdrop,
.overlay {
    z-index: 9000 !important;
}

/* TOOLTIPS Y PEQUEÑOS ELEMENTOS */
.tooltip,
.dropdown-mini {
    z-index: 10500 !important;
}