<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoSocial - Red Social Web3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="src/css/styles.css" rel="stylesheet">
</head>
<body class="h-full gradient-bg font-sans">
    <div id="app" class="h-full flex flex-col">
        <!-- Header -->
        <header class="glass-effect p-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center">
                    <i class="fas fa-rocket text-purple-600 text-xl"></i>
                </div>
                <h1 class="text-white text-2xl font-bold">CryptoSocial</h1>
            </div>
            
            <div class="flex items-center space-x-4">
                <div class="relative">
                    <button onclick="toggleNotifications()" class="relative">
                        <i class="fas fa-bell text-white text-xl cursor-pointer hover:text-yellow-300 transition-colors"></i>
                        <div id="notification-badge" class="notification-dot absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full flex items-center justify-center">
                            <span class="text-white text-xs font-bold">5</span>
                        </div>
                    </button>
                </div>
                <div class="w-8 h-8 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full cursor-pointer" onclick="showSection('profile')"></div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="glass-effect p-2">
            <div class="flex justify-around">
                <button onclick="showSection('home')" class="nav-btn flex flex-col items-center p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20 transition-all">
                    <i class="fas fa-home text-xl mb-1"></i>
                    <span class="text-xs">Inicio</span>
                </button>
                <button onclick="showSection('crypto')" class="nav-btn flex flex-col items-center p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20 transition-all">
                    <i class="fab fa-bitcoin text-xl mb-1"></i>
                    <span class="text-xs">Crypto</span>
                </button>
                <button onclick="showSection('news')" class="nav-btn flex flex-col items-center p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20 transition-all">
                    <i class="fas fa-newspaper text-xl mb-1"></i>
                    <span class="text-xs">Noticias</span>
                </button>
                <button onclick="showSection('chat')" class="nav-btn flex flex-col items-center p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20 transition-all">
                    <i class="fas fa-comments text-xl mb-1"></i>
                    <span class="text-xs">Chat</span>
                </button>
                <button onclick="showSection('profile')" class="nav-btn flex flex-col items-center p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20 transition-all">
                    <i class="fas fa-user text-xl mb-1"></i>
                    <span class="text-xs">Perfil</span>
                </button>
            </div>
        </nav>

        <!-- Notifications Panel -->
        <div id="notifications-panel" class="fixed top-16 right-4 w-80 max-h-96 glass-effect rounded-2xl p-4 z-50 hidden">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-white text-lg font-bold">Notificaciones</h3>
                <button onclick="clearAllNotifications()" class="text-white text-opacity-60 hover:text-white text-sm">
                    Limpiar todo
                </button>
            </div>
            
            <div id="notifications-list" class="space-y-3 max-h-80 overflow-y-auto">
                <div class="notification-item bg-white bg-opacity-10 rounded-xl p-3 cursor-pointer hover:bg-opacity-20 transition-all" onclick="markAsRead(this)">
                    <div class="flex items-start">
                        <div class="w-8 h-8 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full mr-3 flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-heart text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-white text-sm"><span class="font-semibold">Ana Garc√≠a</span> le gust√≥ tu post</p>
                            <p class="text-white text-opacity-60 text-xs mt-1">hace 5 min</p>
                        </div>
                        <div class="w-2 h-2 bg-blue-400 rounded-full flex-shrink-0"></div>
                    </div>
                </div>

                <div class="notification-item bg-white bg-opacity-10 rounded-xl p-3 cursor-pointer hover:bg-opacity-20 transition-all" onclick="markAsRead(this)">
                    <div class="flex items-start">
                        <div class="w-8 h-8 bg-gradient-to-r from-blue-400 to-green-500 rounded-full mr-3 flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-comment text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-white text-sm"><span class="font-semibold">Carlos L√≥pez</span> coment√≥ tu post</p>
                            <p class="text-white text-opacity-60 text-xs mt-1">hace 15 min</p>
                        </div>
                        <div class="w-2 h-2 bg-blue-400 rounded-full flex-shrink-0"></div>
                    </div>
                </div>

                <div class="notification-item bg-white bg-opacity-10 rounded-xl p-3 cursor-pointer hover:bg-opacity-20 transition-all" onclick="markAsRead(this)">
                    <div class="flex items-start">
                        <div class="w-8 h-8 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full mr-3 flex items-center justify-center flex-shrink-0">
                            <i class="fab fa-bitcoin text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-white text-sm">Bitcoin alcanz√≥ <span class="font-semibold">$45,000</span></p>
                            <p class="text-white text-opacity-60 text-xs mt-1">hace 30 min</p>
                        </div>
                        <div class="w-2 h-2 bg-blue-400 rounded-full flex-shrink-0"></div>
                    </div>
                </div>

                <div class="notification-item bg-white bg-opacity-10 rounded-xl p-3 cursor-pointer hover:bg-opacity-20 transition-all" onclick="markAsRead(this)">
                    <div class="flex items-start">
                        <div class="w-8 h-8 bg-gradient-to-r from-green-400 to-teal-500 rounded-full mr-3 flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-user-plus text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-white text-sm"><span class="font-semibold">Mar√≠a Rodr√≠guez</span> comenz√≥ a seguirte</p>
                            <p class="text-white text-opacity-60 text-xs mt-1">hace 1 hora</p>
                        </div>
                        <div class="w-2 h-2 bg-blue-400 rounded-full flex-shrink-0"></div>
                    </div>
                </div>

                <div class="notification-item bg-white bg-opacity-10 rounded-xl p-3 cursor-pointer hover:bg-opacity-20 transition-all" onclick="markAsRead(this)">
                    <div class="flex items-start">
                        <div class="w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full mr-3 flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-share text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-white text-sm"><span class="font-semibold">Luis Mart√≠n</span> comparti√≥ tu post</p>
                            <p class="text-white text-opacity-60 text-xs mt-1">hace 2 horas</p>
                        </div>
                        <div class="w-2 h-2 bg-blue-400 rounded-full flex-shrink-0"></div>
                    </div>
                </div>
            </div>
            
            <div class="mt-4 pt-3 border-t border-white border-opacity-20">
                <button onclick="viewAllNotifications()" class="w-full text-center text-blue-400 hover:text-blue-300 text-sm font-medium">
                    Ver todas las notificaciones
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <main class="flex-1 overflow-hidden">
            <!-- Login Section -->
            <div id="login-section" class="h-full flex items-center justify-center p-6">
                <div class="glass-effect rounded-3xl p-8 w-full max-w-md">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-rocket text-purple-600 text-3xl"></i>
                        </div>
                        <h2 class="text-white text-3xl font-bold mb-2">¬°Bienvenido!</h2>
                        <p class="text-white text-opacity-80">√önete a la revoluci√≥n Web3</p>
                    </div>
                    
                    <div class="space-y-4">
                        <button onclick="loginWithWallet()" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 px-6 rounded-xl font-semibold hover:shadow-lg transition-all hover-scale">
                            <i class="fas fa-wallet mr-2"></i>
                            Conectar Wallet
                        </button>
                        
                        <button onclick="loginWithGoogle()" class="w-full bg-white text-gray-800 py-3 px-6 rounded-xl font-semibold hover:shadow-lg transition-all hover-scale">
                            <i class="fab fa-google mr-2 text-red-500"></i>
                            Continuar con Google
                        </button>
                        
                        <div class="text-center">
                            <span class="text-white text-opacity-60">¬øNo tienes cuenta? </span>
                            <button onclick="showRegister()" class="text-yellow-300 font-semibold hover:underline">Reg√≠strate</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Register Section -->
            <div id="register-section" class="h-full flex items-center justify-center p-6 hidden">
                <div class="glass-effect rounded-3xl p-8 w-full max-w-md">
                    <div class="text-center mb-6">
                        <h2 class="text-white text-3xl font-bold mb-2">Crear Cuenta</h2>
                        <p class="text-white text-opacity-80">√önete a nuestra comunidad</p>
                    </div>
                    
                    <form onsubmit="handleRegister(event)" class="space-y-4">
                        <div>
                            <label for="username" class="block text-white text-sm font-medium mb-2">Nombre de usuario</label>
                            <input type="text" id="username" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-yellow-300" placeholder="Tu nombre √∫nico" required>
                        </div>
                        
                        <div>
                            <label for="email" class="block text-white text-sm font-medium mb-2">Email</label>
                            <input type="email" id="email" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-yellow-300" placeholder="tu@email.com" required>
                        </div>
                        
                        <button type="submit" class="w-full bg-gradient-to-r from-green-400 to-blue-500 text-white py-3 px-6 rounded-xl font-semibold hover:shadow-lg transition-all hover-scale">
                            <i class="fas fa-user-plus mr-2"></i>
                            Crear Cuenta
                        </button>
                        
                        <div class="text-center">
                            <span class="text-white text-opacity-60">¬øYa tienes cuenta? </span>
                            <button type="button" onclick="showLogin()" class="text-yellow-300 font-semibold hover:underline">Inicia sesi√≥n</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Home Section -->
            <div id="home-section" class="h-full p-4 overflow-y-auto hidden relative">
                <!-- Create Post Button -->
                <button onclick="showCreateHomePost()" class="fixed bottom-20 right-4 w-14 h-14 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-xl transition-all z-40 hover-scale">
                    <i class="fas fa-plus text-xl"></i>
                </button>

                <!-- Create Post Modal -->
                <div id="create-home-post-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="glass-effect rounded-2xl p-6 w-full max-w-md mx-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-white text-xl font-bold">Crear Post</h3>
                            <button onclick="hideCreateHomePost()" class="text-white hover:text-gray-300">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <form onsubmit="createHomePost(event)">
                            <textarea id="home-post-content" placeholder="¬øQu√© quieres compartir?" class="w-full h-32 px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-pink-400 resize-none mb-4"></textarea>
                            
                            <!-- Media Preview -->
                            <div id="media-preview" class="hidden mb-4">
                                <div class="bg-white bg-opacity-10 rounded-xl p-4 text-center">
                                    <i class="fas fa-image text-white text-3xl mb-2"></i>
                                    <p class="text-white text-sm">Imagen/Video seleccionado</p>
                                </div>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <div class="flex space-x-3">
                                    <button type="button" onclick="addMedia('image')" class="text-white hover:text-pink-300 transition-colors">
                                        <i class="fas fa-image text-xl"></i>
                                    </button>
                                    <button type="button" onclick="addMedia('video')" class="text-white hover:text-pink-300 transition-colors">
                                        <i class="fas fa-video text-xl"></i>
                                    </button>
                                    <button type="button" onclick="addMedia('gif')" class="text-white hover:text-pink-300 transition-colors">
                                        <i class="fas fa-file-image text-xl"></i>
                                    </button>
                                </div>
                                <button type="submit" class="bg-gradient-to-r from-pink-500 to-purple-500 text-white px-6 py-2 rounded-full hover:shadow-lg transition-all">
                                    Publicar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Stories -->
                <div class="mb-6">
                    <div class="flex space-x-4 overflow-x-auto pb-2">
                        <div class="flex-shrink-0 text-center">
                            <div class="story-ring rounded-full">
                                <div class="w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center">
                                    <i class="fas fa-plus text-gray-600 text-xl"></i>
                                </div>
                            </div>
                            <p class="text-white text-xs mt-1">Tu historia</p>
                        </div>
                        <div class="flex-shrink-0 text-center">
                            <div class="story-ring rounded-full">
                                <div class="w-16 h-16 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full"></div>
                            </div>
                            <p class="text-white text-xs mt-1">Ana</p>
                        </div>
                        <div class="flex-shrink-0 text-center">
                            <div class="story-ring rounded-full">
                                <div class="w-16 h-16 bg-gradient-to-r from-blue-400 to-green-500 rounded-full"></div>
                            </div>
                            <p class="text-white text-xs mt-1">Carlos</p>
                        </div>
                    </div>
                </div>

                <!-- Feed -->
                <div id="home-feed" class="space-y-6">
                    <!-- Post 1 -->
                    <div class="glass-effect rounded-2xl p-4">
                        <div class="flex items-center mb-3">
                            <div class="w-10 h-10 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full mr-3"></div>
                            <div>
                                <h3 class="text-white font-semibold">Mar√≠a Gonz√°lez</h3>
                                <p class="text-white text-opacity-60 text-sm">hace 2 horas</p>
                            </div>
                        </div>
                        <p class="text-white mb-3">¬°Acabo de hacer mi primera inversi√≥n en DeFi! üöÄ #CryptoLife</p>
                        <div class="bg-gradient-to-r from-purple-400 to-pink-400 rounded-xl h-48 mb-3 flex items-center justify-center">
                            <i class="fas fa-chart-line text-white text-4xl"></i>
                        </div>
                        <div class="flex justify-between items-center">
                            <div class="flex space-x-4">
                                <button onclick="toggleLike(this)" class="flex items-center text-white hover:text-red-400 transition-colors">
                                    <i class="far fa-heart mr-1"></i>
                                    <span>124</span>
                                </button>
                                <button class="flex items-center text-white hover:text-blue-400 transition-colors">
                                    <i class="far fa-comment mr-1"></i>
                                    <span>23</span>
                                </button>
                                <button class="flex items-center text-white hover:text-green-400 transition-colors">
                                    <i class="fas fa-share mr-1"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Post 2 -->
                    <div class="glass-effect rounded-2xl p-4">
                        <div class="flex items-center mb-3">
                            <div class="w-10 h-10 bg-gradient-to-r from-blue-400 to-green-500 rounded-full mr-3"></div>
                            <div>
                                <h3 class="text-white font-semibold">Tech News</h3>
                                <p class="text-white text-opacity-60 text-sm">hace 1 hora</p>
                            </div>
                        </div>
                        <p class="text-white mb-3">Bitcoin alcanza nuevo m√°ximo hist√≥rico üìà</p>
                        <div class="bg-gradient-to-r from-yellow-400 to-orange-400 rounded-xl h-32 mb-3 flex items-center justify-center">
                            <i class="fab fa-bitcoin text-white text-4xl"></i>
                        </div>
                        <div class="flex justify-between items-center">
                            <div class="flex space-x-4">
                                <button onclick="toggleLike(this)" class="flex items-center text-white hover:text-red-400 transition-colors">
                                    <i class="far fa-heart mr-1"></i>
                                    <span>89</span>
                                </button>
                                <button class="flex items-center text-white hover:text-blue-400 transition-colors">
                                    <i class="far fa-comment mr-1"></i>
                                    <span>45</span>
                                </button>
                                <button class="flex items-center text-white hover:text-green-400 transition-colors">
                                    <i class="fas fa-share mr-1"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Crypto Market Section -->
            <div id="crypto-section" class="h-full p-4 overflow-y-auto hidden">
                <div class="mb-6">
                    <h2 class="text-white text-2xl font-bold mb-4">Mercado Crypto</h2>
                    
                    <!-- Fear & Greed Index -->
                    <div class="crypto-gradient rounded-2xl p-6 mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-white text-lg font-semibold">√çndice Miedo y Codicia</h3>
                            <div class="text-white text-sm opacity-80">Actualizado ahora</div>
                        </div>
                        <div class="flex items-center justify-center">
                            <div class="relative w-32 h-32">
                                <svg class="w-32 h-32 transform -rotate-90" viewBox="0 0 36 36">
                                    <path class="text-gray-300" stroke="currentColor" stroke-width="3" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                    <path id="fear-greed-arc" class="text-yellow-400" stroke="currentColor" stroke-width="3" fill="none" stroke-linecap="round" stroke-dasharray="65, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <div class="text-center">
                                        <div id="fear-greed-value" class="text-white text-2xl font-bold">65</div>
                                        <div id="fear-greed-label" class="text-white text-xs">Codicia</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Market Overview -->
                    <div class="glass-effect rounded-xl p-4 mb-6">
                        <h3 class="text-white font-semibold mb-3">Resumen del Mercado</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="text-center">
                                <div class="text-white text-opacity-60 text-sm">Cap. Total</div>
                                <div id="total-market-cap" class="text-white font-semibold">$2.1T</div>
                            </div>
                            <div class="text-center">
                                <div class="text-white text-opacity-60 text-sm">Volumen 24h</div>
                                <div id="total-volume" class="text-white font-semibold">$89.5B</div>
                            </div>
                        </div>
                    </div>

                    <!-- Crypto List with Real Prices -->
                    <div class="space-y-3 mb-6">
                        <div onclick="showCryptoChart('BTC')" class="glass-effect rounded-xl p-4 flex items-center justify-between cursor-pointer hover:bg-white hover:bg-opacity-10 transition-all">
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center mr-3">
                                    <i class="fab fa-bitcoin text-white"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-semibold">Bitcoin</h4>
                                    <p class="text-white text-opacity-60 text-sm">BTC</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div id="btc-price" class="text-white font-semibold">$43,250.12</div>
                                <div id="btc-change" class="text-green-400 text-sm">+2.45%</div>
                            </div>
                        </div>

                        <div onclick="showCryptoChart('ETH')" class="glass-effect rounded-xl p-4 flex items-center justify-between cursor-pointer hover:bg-white hover:bg-opacity-10 transition-all">
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center mr-3">
                                    <i class="fab fa-ethereum text-white"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-semibold">Ethereum</h4>
                                    <p class="text-white text-opacity-60 text-sm">ETH</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div id="eth-price" class="text-white font-semibold">$2,890.45</div>
                                <div id="eth-change" class="text-red-400 text-sm">-1.23%</div>
                            </div>
                        </div>

                        <div onclick="showCryptoChart('BNB')" class="glass-effect rounded-xl p-4 flex items-center justify-between cursor-pointer hover:bg-white hover:bg-opacity-10 transition-all">
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-white font-bold text-sm">BNB</span>
                                </div>
                                <div>
                                    <h4 class="text-white font-semibold">BNB</h4>
                                    <p class="text-white text-opacity-60 text-sm">BNB</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div id="bnb-price" class="text-white font-semibold">$315.67</div>
                                <div id="bnb-change" class="text-green-400 text-sm">+4.12%</div>
                            </div>
                        </div>

                        <div onclick="showCryptoChart('ADA')" class="glass-effect rounded-xl p-4 flex items-center justify-between cursor-pointer hover:bg-white hover:bg-opacity-10 transition-all">
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-white font-bold text-sm">ADA</span>
                                </div>
                                <div>
                                    <h4 class="text-white font-semibold">Cardano</h4>
                                    <p class="text-white text-opacity-60 text-sm">ADA</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div id="ada-price" class="text-white font-semibold">$0.4523</div>
                                <div id="ada-change" class="text-green-400 text-sm">+6.78%</div>
                            </div>
                        </div>

                        <div onclick="showCryptoChart('SOL')" class="glass-effect rounded-xl p-4 flex items-center justify-between cursor-pointer hover:bg-white hover:bg-opacity-10 transition-all">
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-white font-bold text-sm">SOL</span>
                                </div>
                                <div>
                                    <h4 class="text-white font-semibold">Solana</h4>
                                    <p class="text-white text-opacity-60 text-sm">SOL</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div id="sol-price" class="text-white font-semibold">$98.34</div>
                                <div id="sol-change" class="text-red-400 text-sm">-3.45%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Crypto Chart Modal -->
            <div id="crypto-chart-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                <div class="glass-effect rounded-2xl p-6 w-full max-w-4xl mx-4 h-5/6 flex flex-col">
                    <div class="flex justify-between items-center mb-4">
                        <div class="flex items-center">
                            <div id="chart-crypto-icon" class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center mr-3">
                                <i class="fab fa-bitcoin text-white"></i>
                            </div>
                            <div>
                                <h3 id="chart-crypto-name" class="text-white text-xl font-bold">Bitcoin</h3>
                                <p id="chart-crypto-symbol" class="text-white text-opacity-60">BTC</p>
                            </div>
                        </div>
                        <button onclick="hideCryptoChart()" class="text-white hover:text-gray-300">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>

                    <!-- Price Info -->
                    <div class="flex items-center space-x-6 mb-4">
                        <div>
                            <div id="chart-current-price" class="text-white text-2xl font-bold">$43,250.12</div>
                            <div id="chart-price-change" class="text-green-400">+2.45% (+$1,034.56)</div>
                        </div>
                    </div>

                    <!-- Timeframe Selector -->
                    <div class="flex space-x-2 mb-4">
                        <button onclick="changeTimeframe('1H')" class="timeframe-btn px-3 py-1 rounded-lg text-white text-sm bg-white bg-opacity-20 hover:bg-opacity-30 transition-all">1H</button>
                        <button onclick="changeTimeframe('4H')" class="timeframe-btn px-3 py-1 rounded-lg text-white text-sm bg-white bg-opacity-20 hover:bg-opacity-30 transition-all">4H</button>
                        <button onclick="changeTimeframe('1D')" class="timeframe-btn px-3 py-1 rounded-lg text-white text-sm bg-purple-500 hover:bg-purple-600 transition-all">1D</button>
                        <button onclick="changeTimeframe('1W')" class="timeframe-btn px-3 py-1 rounded-lg text-white text-sm bg-white bg-opacity-20 hover:bg-opacity-30 transition-all">1W</button>
                        <button onclick="changeTimeframe('1M')" class="timeframe-btn px-3 py-1 rounded-lg text-white text-sm bg-white bg-opacity-20 hover:bg-opacity-30 transition-all">1M</button>
                    </div>

                    <!-- Chart Container -->
                    <div class="flex-1 bg-white bg-opacity-10 rounded-xl p-4">
                        <canvas id="crypto-chart" class="w-full h-full"></canvas>
                    </div>

                    <!-- Chart Stats -->
                    <div class="grid grid-cols-4 gap-4 mt-4">
                        <div class="text-center">
                            <div class="text-white text-opacity-60 text-sm">M√°ximo 24h</div>
                            <div id="chart-high-24h" class="text-white font-semibold">$44,123.45</div>
                        </div>
                        <div class="text-center">
                            <div class="text-white text-opacity-60 text-sm">M√≠nimo 24h</div>
                            <div id="chart-low-24h" class="text-white font-semibold">$42,567.89</div>
                        </div>
                        <div class="text-center">
                            <div class="text-white text-opacity-60 text-sm">Volumen 24h</div>
                            <div id="chart-volume-24h" class="text-white font-semibold">$28.5B</div>
                        </div>
                        <div class="text-center">
                            <div class="text-white text-opacity-60 text-sm">Cap. Mercado</div>
                            <div id="chart-market-cap" class="text-white font-semibold">$847.2B</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- News Section -->
            <div id="news-section" class="h-full p-4 overflow-y-auto hidden">
                <div class="mb-6">
                    <h2 class="text-white text-2xl font-bold mb-4">Noticias Crypto</h2>
                    
                    <div class="space-y-4">
                        <!-- News Item 1 -->
                        <div class="glass-effect rounded-xl p-4">
                            <div class="news-gradient rounded-lg h-32 mb-3 flex items-center justify-center">
                                <i class="fas fa-newspaper text-white text-3xl"></i>
                            </div>
                            <h3 class="text-white font-semibold mb-2">Bitcoin supera los $50,000 por primera vez este a√±o</h3>
                            <p class="text-white text-opacity-70 text-sm mb-3">El precio de Bitcoin ha alcanzado un nuevo m√°ximo anual, impulsado por la adopci√≥n institucional...</p>
                            <div class="flex justify-between items-center">
                                <span class="text-white text-opacity-60 text-xs">hace 30 min</span>
                                <button class="text-blue-400 hover:text-blue-300 transition-colors">
                                    <i class="fas fa-external-link-alt"></i>
                                </button>
                            </div>
                        </div>

                        <!-- News Item 2 -->
                        <div class="glass-effect rounded-xl p-4">
                            <div class="bg-gradient-to-r from-green-400 to-blue-500 rounded-lg h-32 mb-3 flex items-center justify-center">
                                <i class="fas fa-chart-line text-white text-3xl"></i>
                            </div>
                            <h3 class="text-white font-semibold mb-2">DeFi alcanza $100 mil millones en valor bloqueado</h3>
                            <p class="text-white text-opacity-70 text-sm mb-3">El ecosistema de finanzas descentralizadas contin√∫a su crecimiento exponencial...</p>
                            <div class="flex justify-between items-center">
                                <span class="text-white text-opacity-60 text-xs">hace 2 horas</span>
                                <button class="text-blue-400 hover:text-blue-300 transition-colors">
                                    <i class="fas fa-external-link-alt"></i>
                                </button>
                            </div>
                        </div>

                        <!-- News Item 3 -->
                        <div class="glass-effect rounded-xl p-4">
                            <div class="bg-gradient-to-r from-purple-400 to-pink-500 rounded-lg h-32 mb-3 flex items-center justify-center">
                                <i class="fas fa-coins text-white text-3xl"></i>
                            </div>
                            <h3 class="text-white font-semibold mb-2">NFTs revolucionan el mundo del arte digital</h3>
                            <p class="text-white text-opacity-70 text-sm mb-3">Los tokens no fungibles est√°n cambiando la forma en que compramos y vendemos arte...</p>
                            <div class="flex justify-between items-center">
                                <span class="text-white text-opacity-60 text-xs">hace 4 horas</span>
                                <button class="text-blue-400 hover:text-blue-300 transition-colors">
                                    <i class="fas fa-external-link-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Section -->
            <div id="chat-section" class="h-full flex flex-col hidden">
                <!-- Chat Header -->
                <div class="glass-effect p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-white text-xl font-bold">Mensajes</h2>
                        <div class="flex space-x-2">
                            <button onclick="showSearchUsers()" class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center text-white hover:bg-opacity-30 transition-all">
                                <i class="fas fa-search"></i>
                            </button>
                            <button onclick="showNewChat()" class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white hover:bg-blue-600 transition-all">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Chat Tabs -->
                    <div class="flex space-x-1 bg-white bg-opacity-10 rounded-lg p-1">
                        <button onclick="showChatTab('chats')" class="chat-tab-btn flex-1 py-2 px-4 rounded-md text-white text-sm font-medium bg-white bg-opacity-20 transition-all">
                            Chats
                        </button>
                        <button onclick="showChatTab('requests')" class="chat-tab-btn flex-1 py-2 px-4 rounded-md text-white text-sm font-medium hover:bg-white hover:bg-opacity-10 transition-all">
                            Solicitudes
                            <span id="requests-badge" class="ml-1 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5">3</span>
                        </button>
                        <button onclick="showChatTab('archived')" class="chat-tab-btn flex-1 py-2 px-4 rounded-md text-white text-sm font-medium hover:bg-white hover:bg-opacity-10 transition-all">
                            Archivados
                        </button>
                    </div>
                </div>

                <!-- Search Users Modal -->
                <div id="search-users-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="glass-effect rounded-2xl p-6 w-full max-w-md mx-4 max-h-96">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-white text-xl font-bold">Buscar Usuarios</h3>
                            <button onclick="hideSearchUsers()" class="text-white hover:text-gray-300">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="mb-4">
                            <input type="text" id="user-search-input" placeholder="Buscar por nombre de usuario..." class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-blue-400" oninput="searchUsers()">
                        </div>
                        
                        <div id="search-results" class="space-y-2 max-h-64 overflow-y-auto">
                            <!-- Search results will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- New Chat Modal -->
                <div id="new-chat-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="glass-effect rounded-2xl p-6 w-full max-w-md mx-4 max-h-96">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-white text-xl font-bold">Nuevo Chat</h3>
                            <button onclick="hideNewChat()" class="text-white hover:text-gray-300">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="mb-4">
                            <input type="text" id="following-search-input" placeholder="Buscar en tus seguidos..." class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-blue-400" oninput="searchFollowing()">
                        </div>
                        
                        <div id="following-results" class="space-y-2 max-h-64 overflow-y-auto">
                            <!-- Following results will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Chat Lists Container -->
                <div class="flex-1 overflow-hidden">
                    <!-- Active Chats -->
                    <div id="chats-list" class="h-full overflow-y-auto p-4">
                        <div class="space-y-3">
                            <div onclick="openChat('Ana Garc√≠a', 'ana')" class="glass-effect rounded-xl p-4 flex items-center cursor-pointer hover:bg-white hover:bg-opacity-10 transition-all">
                                <div class="w-12 h-12 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full mr-3 flex items-center justify-center">
                                    <span class="text-white font-bold">A</span>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center">
                                        <h3 class="text-white font-semibold">Ana Garc√≠a</h3>
                                        <div class="w-2 h-2 bg-green-400 rounded-full ml-2"></div>
                                    </div>
                                    <p class="text-white text-opacity-60 text-sm">¬øViste el precio de ETH? üöÄ</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-white text-opacity-60 text-xs">14:30</div>
                                    <div class="w-5 h-5 bg-green-500 rounded-full text-white text-xs flex items-center justify-center mt-1">2</div>
                                </div>
                            </div>

                            <div onclick="openChat('Carlos L√≥pez', 'carlos')" class="glass-effect rounded-xl p-4 flex items-center cursor-pointer hover:bg-white hover:bg-opacity-10 transition-all">
                                <div class="w-12 h-12 bg-gradient-to-r from-blue-400 to-green-500 rounded-full mr-3 flex items-center justify-center">
                                    <span class="text-white font-bold">C</span>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-white font-semibold">Carlos L√≥pez</h3>
                                    <p class="text-white text-opacity-60 text-sm">Perfecto, nos vemos ma√±ana</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-white text-opacity-60 text-xs">12:15</div>
                                </div>
                            </div>

                            <div onclick="openChat('Crypto Traders', 'grupo')" class="glass-effect rounded-xl p-4 flex items-center cursor-pointer hover:bg-white hover:bg-opacity-10 transition-all">
                                <div class="w-12 h-12 bg-gradient-to-r from-yellow-400 to-red-500 rounded-full mr-3 flex items-center justify-center">
                                    <i class="fas fa-users text-white"></i>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-white font-semibold">Crypto Traders</h3>
                                    <p class="text-white text-opacity-60 text-sm">Mar√≠a: ¬°Bitcoin a la luna! üåô</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-white text-opacity-60 text-xs">11:45</div>
                                    <div class="w-5 h-5 bg-green-500 rounded-full text-white text-xs flex items-center justify-center mt-1">5</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Message Requests -->
                    <div id="requests-list" class="h-full overflow-y-auto p-4 hidden">
                        <div class="space-y-3">
                            <div class="glass-effect rounded-xl p-4">
                                <div class="flex items-center mb-3">
                                    <div class="w-12 h-12 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full mr-3 flex items-center justify-center">
                                        <span class="text-white font-bold">M</span>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="text-white font-semibold">Mar√≠a Rodr√≠guez</h3>
                                        <p class="text-white text-opacity-60 text-sm">Quiere enviarte un mensaje</p>
                                    </div>
                                </div>
                                <div class="bg-white bg-opacity-10 rounded-lg p-3 mb-3">
                                    <p class="text-white text-sm">¬°Hola! Vi tu post sobre DeFi y me encantar√≠a intercambiar ideas sobre trading.</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="acceptMessageRequest('Mar√≠a Rodr√≠guez', 'maria')" class="flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-all">
                                        Aceptar
                                    </button>
                                    <button onclick="declineMessageRequest('maria')" class="flex-1 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition-all">
                                        Rechazar
                                    </button>
                                </div>
                            </div>

                            <div class="glass-effect rounded-xl p-4">
                                <div class="flex items-center mb-3">
                                    <div class="w-12 h-12 bg-gradient-to-r from-green-400 to-teal-500 rounded-full mr-3 flex items-center justify-center">
                                        <span class="text-white font-bold">L</span>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="text-white font-semibold">Luis Mart√≠n</h3>
                                        <p class="text-white text-opacity-60 text-sm">Quiere enviarte un mensaje</p>
                                    </div>
                                </div>
                                <div class="bg-white bg-opacity-10 rounded-lg p-3 mb-3">
                                    <p class="text-white text-sm">¬øPodr√≠as ayudarme con una duda sobre staking?</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="acceptMessageRequest('Luis Mart√≠n', 'luis')" class="flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-all">
                                        Aceptar
                                    </button>
                                    <button onclick="declineMessageRequest('luis')" class="flex-1 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition-all">
                                        Rechazar
                                    </button>
                                </div>
                            </div>

                            <div class="glass-effect rounded-xl p-4">
                                <div class="flex items-center mb-3">
                                    <div class="w-12 h-12 bg-gradient-to-r from-red-400 to-pink-500 rounded-full mr-3 flex items-center justify-center">
                                        <span class="text-white font-bold">S</span>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="text-white font-semibold">Sofia Chen</h3>
                                        <p class="text-white text-opacity-60 text-sm">Quiere enviarte un mensaje</p>
                                    </div>
                                </div>
                                <div class="bg-white bg-opacity-10 rounded-lg p-3 mb-3">
                                    <p class="text-white text-sm">¬°Hola! Me gust√≥ mucho tu an√°lisis de Bitcoin.</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="acceptMessageRequest('Sofia Chen', 'sofia')" class="flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-all">
                                        Aceptar
                                    </button>
                                    <button onclick="declineMessageRequest('sofia')" class="flex-1 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition-all">
                                        Rechazar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Archived Chats -->
                    <div id="archived-list" class="h-full overflow-y-auto p-4 hidden">
                        <div class="space-y-3">
                            <div class="glass-effect rounded-xl p-4 flex items-center">
                                <div class="w-12 h-12 bg-gradient-to-r from-gray-400 to-gray-600 rounded-full mr-3 flex items-center justify-center">
                                    <span class="text-white font-bold">J</span>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-white font-semibold">Juan P√©rez</h3>
                                    <p class="text-white text-opacity-60 text-sm">Gracias por la informaci√≥n</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-white text-opacity-60 text-xs">hace 2 d√≠as</div>
                                    <button onclick="unarchiveChat('juan')" class="text-blue-400 hover:text-blue-300 text-xs mt-1">
                                        Desarchivar
                                    </button>
                                </div>
                            </div>

                            <div class="glass-effect rounded-xl p-4 flex items-center">
                                <div class="w-12 h-12 bg-gradient-to-r from-purple-400 to-pink-600 rounded-full mr-3 flex items-center justify-center">
                                    <span class="text-white font-bold">E</span>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-white font-semibold">Elena Vega</h3>
                                    <p class="text-white text-opacity-60 text-sm">¬°Perfecto! Nos vemos</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-white text-opacity-60 text-xs">hace 1 semana</div>
                                    <button onclick="unarchiveChat('elena')" class="text-blue-400 hover:text-blue-300 text-xs mt-1">
                                        Desarchivar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Individual Chat -->
            <div id="individual-chat" class="h-full flex-col hidden">
                <!-- Chat Header -->
                <div class="glass-effect p-4 flex items-center justify-between">
                    <div class="flex items-center">
                        <button onclick="backToChats()" class="text-white mr-3">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div id="chat-avatar" class="w-10 h-10 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full mr-3 flex items-center justify-center">
                            <span class="text-white font-bold">A</span>
                        </div>
                        <div>
                            <h3 id="chat-name" class="text-white font-semibold">Ana Garc√≠a</h3>
                            <p id="chat-status" class="text-white text-opacity-60 text-sm">En l√≠nea</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button onclick="showChatOptions()" class="text-white hover:text-gray-300">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                    </div>
                </div>

                <!-- Chat Options Menu -->
                <div id="chat-options-menu" class="absolute top-16 right-4 glass-effect rounded-xl p-2 z-50 hidden">
                    <button onclick="archiveCurrentChat()" class="w-full text-left px-4 py-2 text-white hover:bg-white hover:bg-opacity-10 rounded-lg transition-all">
                        <i class="fas fa-archive mr-2"></i>
                        Archivar chat
                    </button>
                    <button onclick="blockUser()" class="w-full text-left px-4 py-2 text-red-400 hover:bg-white hover:bg-opacity-10 rounded-lg transition-all">
                        <i class="fas fa-ban mr-2"></i>
                        Bloquear usuario
                    </button>
                </div>

                <!-- Messages -->
                <div id="messages-container" class="flex-1 overflow-y-auto p-4 space-y-3">
                    <div class="flex justify-end">
                        <div class="message-bubble bg-blue-500 text-white p-3 rounded-2xl rounded-br-md">
                            ¬°Hola! ¬øC√≥mo est√°s?
                        </div>
                    </div>
                    <div class="flex justify-start">
                        <div class="message-bubble bg-white bg-opacity-20 text-white p-3 rounded-2xl rounded-bl-md">
                            ¬°Muy bien! ¬øViste el precio de ETH? üöÄ
                        </div>
                    </div>
                </div>

                <!-- Message Input -->
                <div class="glass-effect p-4">
                    <form onsubmit="sendMessage(event)" class="flex items-center space-x-3">
                        <input type="text" id="message-input" placeholder="Escribe un mensaje..." class="flex-1 px-4 py-2 rounded-full bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <button type="submit" class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white hover:bg-blue-600 transition-colors">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
            </div>



            <!-- Profile Section -->
            <div id="profile-section" class="h-full p-4 overflow-y-auto hidden">
                <div class="mb-6">
                    <!-- Profile Header -->
                    <div class="profile-gradient rounded-2xl p-6 mb-6 text-center">
                        <div class="w-24 h-24 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mx-auto mb-4 flex items-center justify-center">
                            <span class="text-white text-3xl font-bold">U</span>
                        </div>
                        <h2 id="profile-name" class="text-gray-800 text-2xl font-bold mb-2">Usuario Demo</h2>
                        <p id="profile-bio" class="text-gray-600 mb-4">Trader de crypto apasionado üöÄ</p>
                        <button onclick="showEditProfile()" class="bg-white text-gray-800 px-6 py-2 rounded-full font-semibold hover:shadow-lg transition-all">
                            Editar Perfil
                        </button>
                    </div>

                    <!-- Edit Profile Modal -->
                    <div id="edit-profile-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                        <div class="glass-effect rounded-2xl p-6 w-full max-w-md mx-4">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-white text-xl font-bold">Editar Perfil</h3>
                                <button onclick="hideEditProfile()" class="text-white hover:text-gray-300">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <form onsubmit="updateProfile(event)">
                                <div class="mb-4">
                                    <label for="edit-name" class="block text-white text-sm font-medium mb-2">Nombre</label>
                                    <input type="text" id="edit-name" class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-pink-400" value="Usuario Demo">
                                </div>
                                <div class="mb-6">
                                    <label for="edit-bio" class="block text-white text-sm font-medium mb-2">Descripci√≥n</label>
                                    <textarea id="edit-bio" class="w-full h-24 px-4 py-3 rounded-xl bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-pink-400 resize-none">Trader de crypto apasionado üöÄ</textarea>
                                </div>
                                <button type="submit" class="w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white py-3 px-6 rounded-xl font-semibold hover:shadow-lg transition-all">
                                    Guardar Cambios
                                </button>
                            </form>
                        </div>
                    </div>

                    <!-- Profile Stats -->
                    <div class="grid grid-cols-3 gap-4 mb-6">
                        <div class="glass-effect rounded-xl p-4 text-center">
                            <div class="text-white text-2xl font-bold">156</div>
                            <div class="text-white text-opacity-60 text-sm">Posts</div>
                        </div>
                        <div class="glass-effect rounded-xl p-4 text-center">
                            <div class="text-white text-2xl font-bold">2.3K</div>
                            <div class="text-white text-opacity-60 text-sm">Seguidores</div>
                        </div>
                        <div class="glass-effect rounded-xl p-4 text-center">
                            <div class="text-white text-2xl font-bold">890</div>
                            <div class="text-white text-opacity-60 text-sm">Siguiendo</div>
                        </div>
                    </div>

                    <!-- Profile Options -->
                    <div class="space-y-3">
                        <button class="w-full glass-effect rounded-xl p-4 flex items-center text-white hover:bg-white hover:bg-opacity-10 transition-all">
                            <i class="fas fa-cog mr-3 text-xl"></i>
                            <span>Configuraci√≥n</span>
                        </button>
                        <button class="w-full glass-effect rounded-xl p-4 flex items-center text-white hover:bg-white hover:bg-opacity-10 transition-all">
                            <i class="fas fa-wallet mr-3 text-xl"></i>
                            <span>Mi Wallet</span>
                        </button>
                        <button class="w-full glass-effect rounded-xl p-4 flex items-center text-white hover:bg-white hover:bg-opacity-10 transition-all">
                            <i class="fas fa-shield-alt mr-3 text-xl"></i>
                            <span>Privacidad</span>
                        </button>
                        <button onclick="logout()" class="w-full glass-effect rounded-xl p-4 flex items-center text-red-400 hover:bg-white hover:bg-opacity-10 transition-all">
                            <i class="fas fa-sign-out-alt mr-3 text-xl"></i>
                            <span>Cerrar Sesi√≥n</span>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript Files -->
    <script src="src/js/modules/notifications.js"></script>
    <script src="src/js/modules/crypto.js"></script>
    <script src="src/js/modules/chat.js"></script>
    <script src="src/js/modules/profile.js"></script>
    <script src="src/js/app.js"></script>
</body>
</html>


        // Authentication Functions
        function loginWithWallet() {
            // Simulate wallet connection
            currentUser = { name: 'Usuario Demo', wallet: '0x1234...5678' };
            showSection('home');
            showToast('¬°Wallet conectada exitosamente! üéâ');
        }

        function loginWithGoogle() {
            // Simulate Google login
            currentUser = { name: 'Usuario Demo', email: 'demo@example.com' };
            showSection('home');
            showToast('¬°Sesi√≥n iniciada con Google! üéâ');
        }

        function showRegister() {
            document.getElementById('login-section').classList.add('hidden');
            document.getElementById('register-section').classList.remove('hidden');
        }

        function showLogin() {
            document.getElementById('register-section').classList.add('hidden');
            document.getElementById('login-section').classList.remove('hidden');
        }

        function handleRegister(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            
            currentUser = { name: username, email: email };
            showSection('home');
            showToast(`¬°Bienvenido ${username}! üéâ`);
        }

        function logout() {
            currentUser = null;
            showSection('login');
            showToast('Sesi√≥n cerrada correctamente');
        }

        // Navigation Functions
        function showSection(sectionName) {
            // Hide all sections
            const sections = ['login-section', 'register-section', 'home-section', 'crypto-section', 'news-section', 'chat-section', 'profile-section', 'individual-chat'];
            sections.forEach(section => {
                document.getElementById(section).classList.add('hidden');
            });

            // Show selected section
            if (sectionName === 'login') {
                document.getElementById('login-section').classList.remove('hidden');
            } else {
                document.getElementById(sectionName + '-section').classList.remove('hidden');
            }

            currentSection = sectionName;

            // Update navigation active state
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-white', 'bg-opacity-20');
            });
        }

        // Home Post Functions
        let selectedMediaType = null;

        function showCreateHomePost() {
            document.getElementById('create-home-post-modal').classList.remove('hidden');
        }

        function hideCreateHomePost() {
            document.getElementById('create-home-post-modal').classList.add('hidden');
            document.getElementById('home-post-content').value = '';
            document.getElementById('media-preview').classList.add('hidden');
            selectedMediaType = null;
        }

        function addMedia(type) {
            selectedMediaType = type;
            const preview = document.getElementById('media-preview');
            const icon = preview.querySelector('i');
            const text = preview.querySelector('p');
            
            preview.classList.remove('hidden');
            
            switch(type) {
                case 'image':
                    icon.className = 'fas fa-image text-white text-3xl mb-2';
                    text.textContent = 'Imagen seleccionada';
                    break;
                case 'video':
                    icon.className = 'fas fa-video text-white text-3xl mb-2';
                    text.textContent = 'Video seleccionado';
                    break;
                case 'gif':
                    icon.className = 'fas fa-file-image text-white text-3xl mb-2';
                    text.textContent = 'GIF seleccionado';
                    break;
            }
        }

        function createHomePost(event) {
            event.preventDefault();
            const content = document.getElementById('home-post-content').value.trim();
            
            if (content || selectedMediaType) {
                const feed = document.getElementById('home-feed');
                const postDiv = document.createElement('div');
                postDiv.className = 'glass-effect rounded-2xl p-4 slide-in';
                
                let mediaContent = '';
                if (selectedMediaType) {
                    let mediaClass = '';
                    let mediaIcon = '';
                    
                    switch(selectedMediaType) {
                        case 'image':
                            mediaClass = 'bg-gradient-to-r from-blue-400 to-purple-500';
                            mediaIcon = 'fas fa-image';
                            break;
                        case 'video':
                            mediaClass = 'bg-gradient-to-r from-red-400 to-pink-500';
                            mediaIcon = 'fas fa-play';
                            break;
                        case 'gif':
                            mediaClass = 'bg-gradient-to-r from-green-400 to-teal-500';
                            mediaIcon = 'fas fa-file-image';
                            break;
                    }
                    
                    mediaContent = `
                        <div class="${mediaClass} rounded-xl h-48 mb-3 flex items-center justify-center">
                            <i class="${mediaIcon} text-white text-4xl"></i>
                        </div>
                    `;
                }
                
                postDiv.innerHTML = `
                    <div class="flex items-center mb-3">
                        <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mr-3 flex items-center justify-center">
                            <span class="text-white font-bold">${(currentUser?.name || 'Usuario')[0].toUpperCase()}</span>
                        </div>
                        <div>
                            <h3 class="text-white font-semibold">${currentUser?.name || 'Usuario'}</h3>
                            <p class="text-white text-opacity-60 text-sm">ahora</p>
                        </div>
                    </div>
                    ${content ? `<p class="text-white mb-3">${content}</p>` : ''}
                    ${mediaContent}
                    <div class="flex justify-between items-center">
                        <div class="flex space-x-4">
                            <button onclick="toggleLike(this)" class="flex items-center text-white hover:text-red-400 transition-colors">
                                <i class="far fa-heart mr-1"></i>
                                <span>0</span>
                            </button>
                            <button class="flex items-center text-white hover:text-blue-400 transition-colors">
                                <i class="far fa-comment mr-1"></i>
                                <span>0</span>
                            </button>
                            <button class="flex items-center text-white hover:text-green-400 transition-colors">
                                <i class="fas fa-share mr-1"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                feed.insertBefore(postDiv, feed.firstChild);
                hideCreateHomePost();
                showToast('¬°Post publicado exitosamente! üéâ');
            }
        }

        function toggleLike(button) {
            const icon = button.querySelector('i');
            const count = button.querySelector('span');
            const currentCount = parseInt(count.textContent);
            
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                button.classList.add('text-red-400');
                count.textContent = currentCount + 1;
                
                // Simulate receiving a like notification after a delay
                setTimeout(() => {
                    const users = ['Ana Garc√≠a', 'Carlos L√≥pez', 'Mar√≠a Rodr√≠guez', 'Luis Mart√≠n'];
                    const randomUser = users[Math.floor(Math.random() * users.length)];
                    addNotification('like', `<span class="font-semibold">${randomUser}</span> le gust√≥ tu post`);
                }, Math.random() * 3000 + 2000); // Random delay between 2-5 seconds
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                button.classList.remove('text-red-400');
                count.textContent = Math.max(0, currentCount - 1);
            }
        }

        // Chat Functions
        let currentChatUser = null;
        let currentChatTab = 'chats';

        // Sample data
        const followingUsers = [
            { id: 'ana', name: 'Ana Garc√≠a', avatar: 'A', gradient: 'from-pink-400 to-purple-500', online: true },
            { id: 'carlos', name: 'Carlos L√≥pez', avatar: 'C', gradient: 'from-blue-400 to-green-500', online: false },
            { id: 'maria', name: 'Mar√≠a Rodr√≠guez', avatar: 'M', gradient: 'from-indigo-400 to-purple-500', online: true },
            { id: 'luis', name: 'Luis Mart√≠n', avatar: 'L', gradient: 'from-green-400 to-teal-500', online: true },
            { id: 'sofia', name: 'Sofia Chen', avatar: 'S', gradient: 'from-red-400 to-pink-500', online: false },
            { id: 'diego', name: 'Diego Ruiz', avatar: 'D', gradient: 'from-yellow-400 to-orange-500', online: true },
            { id: 'laura', name: 'Laura Vega', avatar: 'L', gradient: 'from-purple-400 to-pink-600', online: false }
        ];

        const allUsers = [
            ...followingUsers,
            { id: 'pedro', name: 'Pedro S√°nchez', avatar: 'P', gradient: 'from-teal-400 to-blue-500', online: false },
            { id: 'carmen', name: 'Carmen Torres', avatar: 'C', gradient: 'from-orange-400 to-red-500', online: true },
            { id: 'javier', name: 'Javier Morales', avatar: 'J', gradient: 'from-green-500 to-teal-600', online: true }
        ];

        function showChatTab(tab) {
            currentChatTab = tab;
            
            // Update tab buttons
            document.querySelectorAll('.chat-tab-btn').forEach(btn => {
                btn.className = 'chat-tab-btn flex-1 py-2 px-4 rounded-md text-white text-sm font-medium hover:bg-white hover:bg-opacity-10 transition-all';
            });
            
            event.target.className = 'chat-tab-btn flex-1 py-2 px-4 rounded-md text-white text-sm font-medium bg-white bg-opacity-20 transition-all';
            
            // Show/hide lists
            document.getElementById('chats-list').classList.add('hidden');
            document.getElementById('requests-list').classList.add('hidden');
            document.getElementById('archived-list').classList.add('hidden');
            
            document.getElementById(tab + '-list').classList.remove('hidden');
        }

        function showSearchUsers() {
            document.getElementById('search-users-modal').classList.remove('hidden');
            document.getElementById('user-search-input').focus();
            populateSearchResults('');
        }

        function hideSearchUsers() {
            document.getElementById('search-users-modal').classList.add('hidden');
            document.getElementById('user-search-input').value = '';
        }

        function showNewChat() {
            document.getElementById('new-chat-modal').classList.remove('hidden');
            document.getElementById('following-search-input').focus();
            populateFollowingResults('');
        }

        function hideNewChat() {
            document.getElementById('new-chat-modal').classList.add('hidden');
            document.getElementById('following-search-input').value = '';
        }

        function searchUsers() {
            const query = document.getElementById('user-search-input').value.toLowerCase();
            populateSearchResults(query);
        }

        function searchFollowing() {
            const query = document.getElementById('following-search-input').value.toLowerCase();
            populateFollowingResults(query);
        }

        function populateSearchResults(query) {
            const container = document.getElementById('search-results');
            const filteredUsers = allUsers.filter(user => 
                user.name.toLowerCase().includes(query)
            );
            
            container.innerHTML = '';
            
            if (filteredUsers.length === 0) {
                container.innerHTML = '<p class="text-white text-opacity-60 text-center py-4">No se encontraron usuarios</p>';
                return;
            }
            
            filteredUsers.forEach(user => {
                const userDiv = document.createElement('div');
                userDiv.className = 'flex items-center justify-between p-3 hover:bg-white hover:bg-opacity-10 rounded-lg cursor-pointer transition-all';
                userDiv.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-gradient-to-r ${user.gradient} rounded-full mr-3 flex items-center justify-center">
                            <span class="text-white font-bold">${user.avatar}</span>
                        </div>
                        <div>
                            <h4 class="text-white font-semibold">${user.name}</h4>
                            <p class="text-white text-opacity-60 text-sm">@${user.id}</p>
                        </div>
                    </div>
                    <button onclick="sendMessageRequest('${user.id}', '${user.name}')" class="bg-blue-500 text-white px-4 py-1 rounded-full text-sm hover:bg-blue-600 transition-all">
                        Mensaje
                    </button>
                `;
                container.appendChild(userDiv);
            });
        }

        function populateFollowingResults(query) {
            const container = document.getElementById('following-results');
            const filteredUsers = followingUsers.filter(user => 
                user.name.toLowerCase().includes(query)
            );
            
            container.innerHTML = '';
            
            if (filteredUsers.length === 0) {
                container.innerHTML = '<p class="text-white text-opacity-60 text-center py-4">No se encontraron usuarios en tus seguidos</p>';
                return;
            }
            
            filteredUsers.forEach(user => {
                const userDiv = document.createElement('div');
                userDiv.className = 'flex items-center justify-between p-3 hover:bg-white hover:bg-opacity-10 rounded-lg cursor-pointer transition-all';
                userDiv.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-gradient-to-r ${user.gradient} rounded-full mr-3 flex items-center justify-center">
                            <span class="text-white font-bold">${user.avatar}</span>
                        </div>
                        <div>
                            <h4 class="text-white font-semibold">${user.name}</h4>
                            <div class="flex items-center">
                                <div class="w-2 h-2 ${user.online ? 'bg-green-400' : 'bg-gray-400'} rounded-full mr-1"></div>
                                <p class="text-white text-opacity-60 text-sm">${user.online ? 'En l√≠nea' : 'Desconectado'}</p>
                            </div>
                        </div>
                    </div>
                    <button onclick="startNewChat('${user.id}', '${user.name}')" class="bg-green-500 text-white px-4 py-1 rounded-full text-sm hover:bg-green-600 transition-all">
                        Chat
                    </button>
                `;
                container.appendChild(userDiv);
            });
        }

        function sendMessageRequest(userId, userName) {
            hideSearchUsers();
            showToast(`Solicitud de mensaje enviada a ${userName} üì©`);
        }

        function startNewChat(userId, userName) {
            hideNewChat();
            openChat(userName, userId);
        }

        function acceptMessageRequest(userName, userId) {
            // Remove from requests and add to chats
            showToast(`¬°Ahora puedes chatear con ${userName}! üí¨`);
            
            // Update requests badge
            const badge = document.getElementById('requests-badge');
            const currentCount = parseInt(badge.textContent);
            if (currentCount > 1) {
                badge.textContent = currentCount - 1;
            } else {
                badge.style.display = 'none';
            }
            
            // Remove the request from UI
            event.target.closest('.glass-effect').remove();
        }

        function declineMessageRequest(userId) {
            showToast('Solicitud rechazada');
            
            // Update requests badge
            const badge = document.getElementById('requests-badge');
            const currentCount = parseInt(badge.textContent);
            if (currentCount > 1) {
                badge.textContent = currentCount - 1;
            } else {
                badge.style.display = 'none';
            }
            
            // Remove the request from UI
            event.target.closest('.glass-effect').remove();
        }

        function openChat(contactName, userId) {
            currentChatUser = userId;
            document.getElementById('chat-section').classList.add('hidden');
            document.getElementById('individual-chat').classList.remove('hidden');
            document.getElementById('individual-chat').classList.add('flex');
            document.getElementById('chat-name').textContent = contactName;
            
            // Update avatar and status
            const user = allUsers.find(u => u.id === userId) || followingUsers.find(u => u.id === userId);
            if (user) {
                const avatar = document.getElementById('chat-avatar');
                avatar.className = `w-10 h-10 bg-gradient-to-r ${user.gradient} rounded-full mr-3 flex items-center justify-center`;
                avatar.innerHTML = `<span class="text-white font-bold">${user.avatar}</span>`;
                
                document.getElementById('chat-status').textContent = user.online ? 'En l√≠nea' : 'Visto hace 5 min';
            }
        }

        function backToChats() {
            document.getElementById('individual-chat').classList.add('hidden');
            document.getElementById('individual-chat').classList.remove('flex');
            document.getElementById('chat-section').classList.remove('hidden');
            hideChatOptions();
        }

        function showChatOptions() {
            const menu = document.getElementById('chat-options-menu');
            menu.classList.toggle('hidden');
        }

        function hideChatOptions() {
            document.getElementById('chat-options-menu').classList.add('hidden');
        }

        function archiveCurrentChat() {
            hideChatOptions();
            showToast('Chat archivado üìÅ');
            backToChats();
        }

        function blockUser() {
            hideChatOptions();
            showToast('Usuario bloqueado üö´');
            backToChats();
        }

        function unarchiveChat(userId) {
            showToast('Chat desarchivado ‚úÖ');
            event.target.closest('.glass-effect').remove();
        }

        function sendMessage(event) {
            event.preventDefault();
            const input = document.getElementById('message-input');
            const message = input.value.trim();
            
            if (message) {
                const messagesContainer = document.getElementById('messages-container');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'flex justify-end';
                messageDiv.innerHTML = `
                    <div class="message-bubble bg-blue-500 text-white p-3 rounded-2xl rounded-br-md">
                        ${message}
                    </div>
                `;
                messagesContainer.appendChild(messageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                input.value = '';
                
                // Simulate response after 2 seconds
                setTimeout(() => {
                    const responseDiv = document.createElement('div');
                    responseDiv.className = 'flex justify-start';
                    const responses = [
                        '¬°Interesante! ü§î',
                        'Totalmente de acuerdo üëç',
                        '¬øEn serio? ¬°Cu√©ntame m√°s!',
                        'Eso suena genial üöÄ',
                        'No lo sab√≠a, gracias por compartir'
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    
                    responseDiv.innerHTML = `
                        <div class="message-bubble bg-white bg-opacity-20 text-white p-3 rounded-2xl rounded-bl-md">
                            ${randomResponse}
                        </div>
                    `;
                    messagesContainer.appendChild(responseDiv);
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }, 2000);
            }
        }

        // Close chat options when clicking outside
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('chat-options-menu');
            const button = event.target.closest('[onclick="showChatOptions()"]');
            
            if (!menu.contains(event.target) && !button) {
                hideChatOptions();
            }
        });



        // Profile Functions
        function showEditProfile() {
            document.getElementById('edit-profile-modal').classList.remove('hidden');
        }

        function hideEditProfile() {
            document.getElementById('edit-profile-modal').classList.add('hidden');
        }

        function updateProfile(event) {
            event.preventDefault();
            const name = document.getElementById('edit-name').value;
            const bio = document.getElementById('edit-bio').value;
            
            document.getElementById('profile-name').textContent = name;
            document.getElementById('profile-bio').textContent = bio;
            
            if (currentUser) {
                currentUser.name = name;
            }
            
            hideEditProfile();
            showToast('¬°Perfil actualizado! ‚ú®');
        }

        // Notifications Functions
        let notificationsVisible = false;
        let unreadNotifications = 5;

        function toggleNotifications() {
            const panel = document.getElementById('notifications-panel');
            notificationsVisible = !notificationsVisible;
            
            if (notificationsVisible) {
                panel.classList.remove('hidden');
                panel.classList.add('slide-in');
            } else {
                panel.classList.add('hidden');
                panel.classList.remove('slide-in');
            }
        }

        function markAsRead(notificationElement) {
            const dot = notificationElement.querySelector('.w-2.h-2.bg-blue-400');
            if (dot) {
                dot.remove();
                unreadNotifications = Math.max(0, unreadNotifications - 1);
                updateNotificationBadge();
                
                // Add read state styling
                notificationElement.classList.add('opacity-75');
            }
        }

        function clearAllNotifications() {
            const notificationsList = document.getElementById('notifications-list');
            notificationsList.innerHTML = '<p class="text-white text-opacity-60 text-center py-8">No hay notificaciones</p>';
            unreadNotifications = 0;
            updateNotificationBadge();
            showToast('Todas las notificaciones han sido eliminadas');
        }

        function updateNotificationBadge() {
            const badge = document.getElementById('notification-badge');
            const badgeText = badge.querySelector('span');
            
            if (unreadNotifications > 0) {
                badge.style.display = 'flex';
                badgeText.textContent = unreadNotifications > 9 ? '9+' : unreadNotifications;
            } else {
                badge.style.display = 'none';
            }
        }

        function viewAllNotifications() {
            showToast('Funci√≥n "Ver todas" pr√≥ximamente disponible');
            toggleNotifications();
        }

        function addNotification(type, message, user = null) {
            const notificationsList = document.getElementById('notifications-list');
            
            // Remove "no notifications" message if exists
            const emptyMessage = notificationsList.querySelector('p');
            if (emptyMessage) {
                emptyMessage.remove();
            }
            
            let iconClass, iconBg;
            switch(type) {
                case 'like':
                    iconClass = 'fas fa-heart';
                    iconBg = 'from-pink-400 to-purple-500';
                    break;
                case 'comment':
                    iconClass = 'fas fa-comment';
                    iconBg = 'from-blue-400 to-green-500';
                    break;
                case 'follow':
                    iconClass = 'fas fa-user-plus';
                    iconBg = 'from-green-400 to-teal-500';
                    break;
                case 'share':
                    iconClass = 'fas fa-share';
                    iconBg = 'from-purple-400 to-pink-500';
                    break;
                case 'crypto':
                    iconClass = 'fab fa-bitcoin';
                    iconBg = 'from-yellow-400 to-orange-500';
                    break;
                default:
                    iconClass = 'fas fa-bell';
                    iconBg = 'from-gray-400 to-gray-600';
            }
            
            const notificationDiv = document.createElement('div');
            notificationDiv.className = 'notification-item bg-white bg-opacity-10 rounded-xl p-3 cursor-pointer hover:bg-opacity-20 transition-all slide-in';
            notificationDiv.onclick = () => markAsRead(notificationDiv);
            
            notificationDiv.innerHTML = `
                <div class="flex items-start">
                    <div class="w-8 h-8 bg-gradient-to-r ${iconBg} rounded-full mr-3 flex items-center justify-center flex-shrink-0">
                        <i class="${iconClass} text-white text-sm"></i>
                    </div>
                    <div class="flex-1">
                        <p class="text-white text-sm">${message}</p>
                        <p class="text-white text-opacity-60 text-xs mt-1">ahora</p>
                    </div>
                    <div class="w-2 h-2 bg-blue-400 rounded-full flex-shrink-0"></div>
                </div>
            `;
            
            notificationsList.insertBefore(notificationDiv, notificationsList.firstChild);
            unreadNotifications++;
            updateNotificationBadge();
        }

        // Close notifications when clicking outside
        document.addEventListener('click', function(event) {
            const panel = document.getElementById('notifications-panel');
            const button = event.target.closest('[onclick="toggleNotifications()"]');
            
            if (!panel.contains(event.target) && !button && notificationsVisible) {
                toggleNotifications();
            }
        });

        // Utility Functions
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 slide-in';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Crypto Functions
        let currentCrypto = 'BTC';
        let currentTimeframe = '1D';
        let cryptoChart = null;

        const cryptoData = {
            'BTC': {
                name: 'Bitcoin',
                symbol: 'BTC',
                icon: 'fab fa-bitcoin',
                iconBg: 'bg-yellow-500',
                price: 43250.12,
                change: 2.45,
                high24h: 44123.45,
                low24h: 42567.89,
                volume24h: '28.5B',
                marketCap: '847.2B'
            },
            'ETH': {
                name: 'Ethereum',
                symbol: 'ETH',
                icon: 'fab fa-ethereum',
                iconBg: 'bg-blue-500',
                price: 2890.45,
                change: -1.23,
                high24h: 2945.67,
                low24h: 2834.12,
                volume24h: '15.2B',
                marketCap: '347.8B'
            },
            'BNB': {
                name: 'BNB',
                symbol: 'BNB',
                icon: 'BNB',
                iconBg: 'bg-yellow-600',
                price: 315.67,
                change: 4.12,
                high24h: 325.89,
                low24h: 308.45,
                volume24h: '2.1B',
                marketCap: '48.7B'
            },
            'ADA': {
                name: 'Cardano',
                symbol: 'ADA',
                icon: 'ADA',
                iconBg: 'bg-blue-600',
                price: 0.4523,
                change: 6.78,
                high24h: 0.4689,
                low24h: 0.4234,
                volume24h: '890M',
                marketCap: '15.9B'
            },
            'SOL': {
                name: 'Solana',
                symbol: 'SOL',
                icon: 'SOL',
                iconBg: 'bg-purple-600',
                price: 98.34,
                change: -3.45,
                high24h: 102.67,
                low24h: 95.23,
                volume24h: '1.8B',
                marketCap: '42.3B'
            }
        };

        function updateCryptoPrices() {
            Object.keys(cryptoData).forEach(symbol => {
                const crypto = cryptoData[symbol];
                // Simulate price fluctuation
                const fluctuation = (Math.random() - 0.5) * 0.02; // ¬±1% max
                crypto.price = crypto.price * (1 + fluctuation);
                crypto.change = crypto.change + (Math.random() - 0.5) * 0.5;
                
                // Update UI
                const priceElement = document.getElementById(`${symbol.toLowerCase()}-price`);
                const changeElement = document.getElementById(`${symbol.toLowerCase()}-change`);
                
                if (priceElement) {
                    priceElement.textContent = `$${crypto.price.toFixed(crypto.price < 1 ? 4 : 2)}`;
                }
                
                if (changeElement) {
                    const changeText = `${crypto.change >= 0 ? '+' : ''}${crypto.change.toFixed(2)}%`;
                    changeElement.textContent = changeText;
                    changeElement.className = crypto.change >= 0 ? 'text-green-400 text-sm' : 'text-red-400 text-sm';
                }
            });
        }

        function updateFearGreedIndex() {
            const value = Math.floor(Math.random() * 100);
            const valueElement = document.getElementById('fear-greed-value');
            const labelElement = document.getElementById('fear-greed-label');
            const arcElement = document.getElementById('fear-greed-arc');
            
            if (valueElement) valueElement.textContent = value;
            
            let label, color;
            if (value <= 25) {
                label = 'Miedo Extremo';
                color = 'text-red-500';
            } else if (value <= 45) {
                label = 'Miedo';
                color = 'text-orange-500';
            } else if (value <= 55) {
                label = 'Neutral';
                color = 'text-yellow-400';
            } else if (value <= 75) {
                label = 'Codicia';
                color = 'text-green-400';
            } else {
                label = 'Codicia Extrema';
                color = 'text-green-500';
            }
            
            if (labelElement) labelElement.textContent = label;
            if (arcElement) {
                arcElement.className = `${color}`;
                arcElement.setAttribute('stroke-dasharray', `${value}, 100`);
            }
        }

        function showCryptoChart(symbol) {
            currentCrypto = symbol;
            const crypto = cryptoData[symbol];
            
            // Update modal content
            document.getElementById('chart-crypto-name').textContent = crypto.name;
            document.getElementById('chart-crypto-symbol').textContent = crypto.symbol;
            document.getElementById('chart-current-price').textContent = `$${crypto.price.toFixed(crypto.price < 1 ? 4 : 2)}`;
            
            const changeText = `${crypto.change >= 0 ? '+' : ''}${crypto.change.toFixed(2)}% (${crypto.change >= 0 ? '+' : ''}$${Math.abs(crypto.price * crypto.change / 100).toFixed(2)})`;
            document.getElementById('chart-price-change').textContent = changeText;
            document.getElementById('chart-price-change').className = crypto.change >= 0 ? 'text-green-400' : 'text-red-400';
            
            document.getElementById('chart-high-24h').textContent = `$${crypto.high24h.toFixed(crypto.high24h < 1 ? 4 : 2)}`;
            document.getElementById('chart-low-24h').textContent = `$${crypto.low24h.toFixed(crypto.low24h < 1 ? 4 : 2)}`;
            document.getElementById('chart-volume-24h').textContent = `$${crypto.volume24h}`;
            document.getElementById('chart-market-cap').textContent = `$${crypto.marketCap}`;
            
            // Update icon
            const iconElement = document.getElementById('chart-crypto-icon');
            iconElement.className = `w-8 h-8 ${crypto.iconBg} rounded-full flex items-center justify-center mr-3`;
            
            if (crypto.icon.startsWith('fab')) {
                iconElement.innerHTML = `<i class="${crypto.icon} text-white"></i>`;
            } else {
                iconElement.innerHTML = `<span class="text-white font-bold text-sm">${crypto.icon}</span>`;
            }
            
            // Show modal
            document.getElementById('crypto-chart-modal').classList.remove('hidden');
            
            // Initialize chart
            initializeCryptoChart();
        }

        function hideCryptoChart() {
            document.getElementById('crypto-chart-modal').classList.add('hidden');
            if (cryptoChart) {
                cryptoChart.destroy();
                cryptoChart = null;
            }
        }

        function changeTimeframe(timeframe) {
            currentTimeframe = timeframe;
            
            // Update button states
            document.querySelectorAll('.timeframe-btn').forEach(btn => {
                btn.className = 'timeframe-btn px-3 py-1 rounded-lg text-white text-sm bg-white bg-opacity-20 hover:bg-opacity-30 transition-all';
            });
            
            event.target.className = 'timeframe-btn px-3 py-1 rounded-lg text-white text-sm bg-purple-500 hover:bg-purple-600 transition-all';
            
            // Update chart
            if (cryptoChart) {
                updateChartData();
            }
        }

        function initializeCryptoChart() {
            const canvas = document.getElementById('crypto-chart');
            const ctx = canvas.getContext('2d');
            
            // Generate sample candlestick data
            const data = generateCandlestickData();
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Set canvas size
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // Draw candlestick chart
            drawCandlestickChart(ctx, data, canvas.width, canvas.height);
        }

        function generateCandlestickData() {
            const crypto = cryptoData[currentCrypto];
            const basePrice = crypto.price;
            const dataPoints = currentTimeframe === '1H' ? 24 : currentTimeframe === '4H' ? 24 : currentTimeframe === '1D' ? 30 : currentTimeframe === '1W' ? 52 : 12;
            
            const data = [];
            let currentPrice = basePrice * 0.95; // Start slightly lower
            
            for (let i = 0; i < dataPoints; i++) {
                const volatility = 0.03; // 3% volatility
                const change = (Math.random() - 0.5) * volatility;
                
                const open = currentPrice;
                const close = open * (1 + change);
                const high = Math.max(open, close) * (1 + Math.random() * 0.02);
                const low = Math.min(open, close) * (1 - Math.random() * 0.02);
                
                data.push({ open, high, low, close });
                currentPrice = close;
            }
            
            return data;
        }

        function drawCandlestickChart(ctx, data, width, height) {
            const padding = 40;
            const chartWidth = width - padding * 2;
            const chartHeight = height - padding * 2;
            
            // Find min and max prices
            let minPrice = Infinity;
            let maxPrice = -Infinity;
            
            data.forEach(candle => {
                minPrice = Math.min(minPrice, candle.low);
                maxPrice = Math.max(maxPrice, candle.high);
            });
            
            const priceRange = maxPrice - minPrice;
            const candleWidth = chartWidth / data.length * 0.8;
            const candleSpacing = chartWidth / data.length;
            
            // Draw grid lines
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 1;
            
            // Horizontal grid lines
            for (let i = 0; i <= 5; i++) {
                const y = padding + (chartHeight / 5) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }
            
            // Vertical grid lines
            for (let i = 0; i <= 6; i++) {
                const x = padding + (chartWidth / 6) * i;
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();
            }
            
            // Draw candlesticks
            data.forEach((candle, index) => {
                const x = padding + index * candleSpacing + candleSpacing / 2;
                
                const openY = padding + chartHeight - ((candle.open - minPrice) / priceRange) * chartHeight;
                const closeY = padding + chartHeight - ((candle.close - minPrice) / priceRange) * chartHeight;
                const highY = padding + chartHeight - ((candle.high - minPrice) / priceRange) * chartHeight;
                const lowY = padding + chartHeight - ((candle.low - minPrice) / priceRange) * chartHeight;
                
                const isGreen = candle.close > candle.open;
                
                // Draw wick
                ctx.strokeStyle = isGreen ? '#10B981' : '#EF4444';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(x, highY);
                ctx.lineTo(x, lowY);
                ctx.stroke();
                
                // Draw body
                ctx.fillStyle = isGreen ? '#10B981' : '#EF4444';
                const bodyTop = Math.min(openY, closeY);
                const bodyHeight = Math.abs(closeY - openY);
                
                ctx.fillRect(x - candleWidth / 2, bodyTop, candleWidth, Math.max(bodyHeight, 1));
            });
            
            // Draw price labels
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.font = '12px Arial';
            ctx.textAlign = 'right';
            
            for (let i = 0; i <= 5; i++) {
                const price = maxPrice - (priceRange / 5) * i;
                const y = padding + (chartHeight / 5) * i;
                ctx.fillText(`$${price.toFixed(price < 1 ? 4 : 2)}`, padding - 10, y + 4);
            }
        }

        function updateChartData() {
            if (cryptoChart) {
                initializeCryptoChart();
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            showSection('login');
            
            // Update crypto prices every 5 seconds
            setInterval(updateCryptoPrices, 5000);
            
            // Update fear & greed index every 30 seconds
            setInterval(updateFearGreedIndex, 30000);
            
            // Generate random notifications every 15-30 seconds
            setInterval(() => {
                if (currentUser) { // Only generate notifications if user is logged in
                    generateRandomNotification();
                }
            }, Math.random() * 15000 + 15000); // Random interval between 15-30 seconds
            
            // Initial updates
            updateFearGreedIndex();
        });

        function generateRandomNotification() {
            const notificationTypes = [
                {
                    type: 'like',
                    messages: [
                        'le gust√≥ tu post sobre crypto',
                        'reaccion√≥ a tu an√°lisis de Bitcoin',
                        'le encant√≥ tu post sobre DeFi'
                    ]
                },
                {
                    type: 'comment',
                    messages: [
                        'coment√≥ en tu post',
                        'respondi√≥ a tu an√°lisis',
                        'dej√≥ un comentario en tu publicaci√≥n'
                    ]
                },
                {
                    type: 'follow',
                    messages: [
                        'comenz√≥ a seguirte',
                        'ahora te sigue',
                        'se uni√≥ a tus seguidores'
                    ]
                },
                {
                    type: 'share',
                    messages: [
                        'comparti√≥ tu post',
                        'reposte√≥ tu an√°lisis',
                        'comparti√≥ tu contenido'
                    ]
                },
                {
                    type: 'crypto',
                    messages: [
                        'Bitcoin alcanz√≥ un nuevo m√°ximo de $45,200',
                        'Ethereum subi√≥ 5% en la √∫ltima hora',
                        'El mercado crypto est√° en tendencia alcista',
                        'Alerta: Movimiento significativo en Solana',
                        'DeFi Total Value Locked super√≥ los $100B'
                    ]
                }
            ];

            const users = ['Ana Garc√≠a', 'Carlos L√≥pez', 'Mar√≠a Rodr√≠guez', 'Luis Mart√≠n', 'Sofia Chen', 'Diego Ruiz', 'Laura Vega'];
            
            const randomType = notificationTypes[Math.floor(Math.random() * notificationTypes.length)];
            const randomMessage = randomType.messages[Math.floor(Math.random() * randomType.messages.length)];
            
            let finalMessage;
            if (randomType.type === 'crypto') {
                finalMessage = randomMessage;
            } else {
                const randomUser = users[Math.floor(Math.random() * users.length)];
                finalMessage = `<span class="font-semibold">${randomUser}</span> ${randomMessage}`;
            }
            
            addNotification(randomType.type, finalMessage);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99333fccd4aaf065',t:'MTc2MTI0MzYzNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
